/*
tyto - http://jh3y.github.io/tyto
Licensed under the MIT license

jh3y (c) 2015

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
!function(){!function t(e,o,i){function n(r,l){if(!o[r]){if(!e[r]){var a="function"==typeof require&&require;if(!l&&a)return a(r,!0);if(s)return s(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){var o=e[r][1][t];return n(o?o:t)},u,u.exports,t,e,o,i)}return o[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(t,e,o){var i,n,s,r,l,a,d;n=t("./config/tyto"),window.Tyto=i=new n,i.TemplateStore=t("./templates/templates"),s=t("./controllers/tyto"),d=t("./views/tyto"),r=t("./models/tyto"),a=t("./utils/utils"),l=t("./utils/suggestions"),i.module("Models",r),i.module("Ctrl",s),i.module("Views",d),i.module("Utils",a),i.module("Suggestions",l),i.Boards=new i.Models.BoardCollection,i.Columns=new i.Models.ColumnCollection,i.Tasks=new i.Models.TaskCollection,i.ActiveBoard=new i.Models.Board,i.ActiveCols=new i.Models.ColumnCollection,i.ActiveTasks=new i.Models.TaskCollection,i.on("before:start",function(){return i.setRootLayout()}),i.on("start",function(){return i.__renderer=new marked.Renderer,i.__renderer.link=function(t,e,o){var i,n,s;if(this.options.sanitize){try{s=decodeURIComponent(unescape(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(r){return i=r,""}if(0===s.indexOf("javascript:")||0===s.indexOf("vbscript:"))return""}return n='<a target="_blank" href="'+t+'"',e&&(n+=' title="'+e+'"'),n+=">"+o+"</a>"},marked.setOptions({renderer:i.__renderer}),i.Controller=new i.Ctrl.Controller,i.Controller.Router=new i.Ctrl.Router({controller:i.Controller}),i.Controller.start(),Backbone.history.start()}),i.Utils.load(window.localStorage),i.start()},{"./config/tyto":2,"./controllers/tyto":3,"./models/tyto":4,"./templates/templates":5,"./utils/suggestions":6,"./utils/utils":7,"./views/tyto":17}],2:[function(t,e,o){var i;i=Marionette.Application.extend({navigate:function(t,e){return Backbone.history.navigate(t,e)},setRootLayout:function(){return Tyto.RootView=new Tyto.Views.Root},NAVIGATION_DURATION:500,TASK_COLORS:["yellow","red","blue","indigo","green","purple","orange","pink"],DEFAULT_TASK_COLOR:"yellow",ANIMATION_EVENT:"animationend webkitAnimationEnd oAnimationEnd",INTRO_JSON_SRC:"js/intro.json",LOADING_CLASS:"is--loading",SELECTED_CLASS:"is--selected",CONFIRM_MESSAGE:"[tyto] are you sure you wish to delete this item?"}),e.exports=i},{}],3:[function(t,e,o){var i;i=function(t,e,o,i){return t.Router=i.AppRouter.extend({appRoutes:{"board/:board":"showBoardView","board/:board/task/:task":"showEditView","board/:board/task/:task?:params":"showEditView","*path":"showSelectView"}}),t.Controller=i.Controller.extend({start:function(){return this.showMenu(),window.localStorage&&!window.localStorage.tyto?this.showCookieBanner():void 0},showSelectView:function(){return Tyto.SelectView=new e.Views.Select({collection:Tyto.Boards}),Tyto.RootView.showChildView("Content",Tyto.SelectView)},showMenu:function(){return Tyto.MenuView=new e.Views.Menu,Tyto.RootView.showChildView("Menu",Tyto.MenuView)},showCookieBanner:function(){return Tyto.RootView.$el.prepend($('<div id="cookie-banner"></div>')),Tyto.RootView.addRegion("Cookie","#cookie-banner"),Tyto.CookieBannerView=new e.Views.CookieBanner,Tyto.RootView.showChildView("Cookie",Tyto.CookieBannerView)},showBoardView:function(t){var o,i,n;return Tyto.ActiveBoard=i=Tyto.Boards.get(t),void 0!==i?(o=Tyto.Columns.where({boardId:i.id}),n=Tyto.Tasks.where({boardId:i.id}),Tyto.ActiveTasks.reset(n),Tyto.ActiveCols.reset(o),Tyto.BoardView=new e.Views.Board({model:i,collection:Tyto.ActiveCols,options:{tasks:Tyto.ActiveTasks}}),e.RootView.showChildView("Content",Tyto.BoardView)):e.navigate("/",!0)},showEditView:function(t,o,i){var n,s,r,l,a,d;return n=Tyto.Boards.get(t),s=Tyto.Columns.where({boardId:t}),l=void 0,r=!1,i?(a=Tyto.Utils.processQueryString(i),"true"===a.isFresh&&(r=!0,d=Tyto.TempTask=new Tyto.Models.Task({boardId:t,id:o}))):d=Tyto.Tasks.get(o),d&&n?(Tyto.EditView=new e.Views.Edit({model:d,board:n,columns:s,isNew:r}),e.RootView.showChildView("Content",Tyto.EditView)):n?Tyto.navigate("/board/"+n.id,!0):Tyto.navigate("/",!0)}})},e.exports=i},{}],4:[function(t,e,o){var i;i=function(t,e,o){return t.Board=o.Model.extend({defaults:{title:"New Board"}}),t.BoardCollection=o.Collection.extend({localStorage:new o.LocalStorage("tyto--board"),model:t.Board}),t.Column=o.Model.extend({defaults:{title:"New Column",ordinal:1},localStorage:new o.LocalStorage("tyto--column")}),t.ColumnCollection=o.Collection.extend({model:t.Column,localStorage:new o.LocalStorage("tyto--column")}),t.Task=o.Model.extend({defaults:{title:"New Todo",description:"Making this work!",color:"yellow",timeSpent:{hours:0,minutes:0,seconds:0}},localStorage:new o.LocalStorage("tyto--task")}),t.TaskCollection=o.Collection.extend({localStorage:new o.LocalStorage("tyto--task"),model:t.Task})},e.exports=i},{}],5:[function(require,module,exports){module.exports={board:function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='<div class="tyto-board__options"><button id="tyto-board__menu" title="Board options" class="mdl-button mdl-js-button mdl-button--icon tyto-board__menu-btn "><i class="material-icons">more_vert</i></button><ul for="tyto-board__menu" class="mdl-menu mdl-js-menu mdl-js-ripple-effect tyto-board__menu mdl-menu--bottom-right"><li class="tyto-board__wipe-board mdl-menu__item">Wipe board</li><li class="tyto-board__delete-board mdl-menu__item">Delete board</li><li class="tyto-board__email-board mdl-menu__item">Email board</li><a style="display: none;" class="tyto-board__emailer"></a></ul></div><div class="tyto-board__details"><h1 contenteditable="true" class="tyto-board__title bg--white">'+(null==(__t=title)?"":__t)+"</h1>",boards.length>1&&(__p+='<button id="tyto-board__selector" title="Select a board" class="mdl-button mdl-js-button mdl-button--icon tyto-board__selector__menu-btn "><i class="material-icons">expand_more</i></button><ul for="tyto-board__selector" class="mdl-menu mdl-js-menu mdl-js-ripple-effect tyto-board__selector__menu mdl-menu--bottom-right">',_.each(boards.models,function(t){__p+="\n",t.attributes.id!=id&&(__p+='<li title="View board" class="mdl-menu__item tyto-board__selector-option"><a href="#board/'+(null==(__t=t.attributes.id)?"":__t)+'">'+(null==(__t=t.attributes.title)?"":__t)+"</a></li>"),__p+="\n"}),__p+="</ul>"),__p+='</div><div class="tyto-board__columns"></div><div class="tyto-board__actions mdl-button--fab_flinger-container"><button class="tyto-board__add-entity mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"><i class="material-icons">add</i></button><div class="mdl-button--fab_flinger-options"><button title="Add task" class="tyto-board__super-add mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"><i class="material-icons">description</i><i class="material-icons sub">add</i></button><button title="Add column" class="tyto-board__add-column mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"><i class="material-icons">view_column</i><i class="material-icons sub">add</i></button></div></div><div class="tyto-board__bloomer"></div>';return __p},column:function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="tyto-column__content"><div class="tyto-column__actions"><i title="Move column" class="tyto-column__mover material-icons does--fade">open_with</i><h6 contenteditable="true" title="Column title" class="tyto-column__title input--fade bg--white">'+(null==(__t=title)?"":__t)+'</h6><button id="'+(null==(__t=id)?"":__t)+'--menu" title="Column options" class="mdl-button mdl-js-button mdl-button--icon tyto-column__menu-btn does--fade"><i class="material-icons">more_vert</i></button><ul for="'+(null==(__t=id)?"":__t)+'--menu" class="mdl-menu mdl-js-menu mdl-js-ripple-effect tyto-column__menu mdl-menu--bottom-right"><li title="Delete column" class="tyto-column__delete-column mdl-menu__item">Delete</li><li title="Add task" class="tyto-column__add-task mdl-menu__item">Add task</li></ul></div><div class="tyto-column__tasks"></div><div class="tyto-column__action"><i title="Add task" class="material-icons tyto-column__add-task does--fade">add</i></div></div>';return __p},cookieBanner:function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="tyto-cookies bg--blue"><img src="img/tyto.png"/><p>tyto uses cookies that enable it to provide functionality and a better user experience. By using tyto and closing this message you agree to the use of cookies. <a href="cookies.html" target="_blank">Read more...</a></p><button class="tyto-cookies__accept mdl-button mdl-js-button mdl-button--raised mdl-button--accent mdl-js-ripple-effect">Close</button></div>';return __p},edit:function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='<div class="tyto-edit__nav">',isNew?(__p+='<button class="tyto-edit__save mdl-button mdl-js-button mdl-js-ripple-effect">Done</button><a href="#board/',board.id,__p+='" class="tyto-edit__cancel mdl-button mdl-js-button mdl-js-ripple-effect">Cancel</a>'):__p+='<a href="#board/'+(null==(__t=board.id)?"":__t)+'" class="tyto-edit__back mdl-button mdl-js-button mdl-js-ripple-effect">Return to board</a>',__p+='</div><div class="tyto-edit__content"><div class="tyto-edit__details has--bottom-margin"><h1 contenteditable="true" data-model-prop="title" title="Task title" class="tyto-edit__task-title">'+(null==(__t=title)?"":__t)+'</h1><div title="Task description" class="tyto-edit__task-description">'+(null==(__t=description)?"":__t)+'</div><div class="tyto-task__edit-wrapper"><textarea data-model-prop="description" class="tyto-edit__edit-description is--hidden"></textarea><div class="tyto-task__suggestions tyto-suggestions__container mdl-shadow--2dp is--hidden"></div></div></div><div class="tyto-edit__details-footer tx--right has--bottom-margin"><div title="Time spent" class="tyto-time tyto-edit__task-time"><i class="tyto-time__icon material-icons">schedule</i><span class="tyto-edit__task-time__hours tyto-time__hours">'+(null==(__t=timeSpent.hours)?"":__t)+'h</span><span class="tyto-edit__task-time__minutes tyto-time__minutes">'+(null==(__t=timeSpent.minutes)?"":__t)+'m</span></div><div class="tyto-edit__task-column">',selectedColumn&&(__p+="\n"+(null==(__t=selectedColumn.attributes.title)?"":__t)+"\n"),__p+='</div></div><div class="tyto-edit__actions">',columns.length>0&&(__p+='<button id="column-select" title="Select column" class="mdl-button mdl-js-button mdl-button--icon tyto-edit__column-select__menu-btn "><i class="material-icons">view_column</i></button><ul for="column-select" class="mdl-menu mdl-js-menu mdl-js-ripple-effect tyto-edit__column-select__menu mdl-menu--bottom-right">',_.forEach(columns,function(t){if(__p+="\n",!isNew)var e=t.attributes.id===columnId?"is--selected":"";__p+='<li data-column-id="'+(null==(__t=t.id)?"":__t)+'" class="mdl-menu__item tyto-edit__column-select__menu-option '+(null==(__t=e)?"":__t)+'">'+(null==(__t=t.attributes.title)?"":__t)+"</li>"}),__p+="</ul>"),__p+='<button id="color-select" title="Change color" class="mdl-button mdl-js-button mdl-button--icon tyto-edit__color-select__menu-btn "><i class="material-icons">color_lens</i></button><ul for="color-select" class="mdl-menu mdl-js-menu mdl-js-ripple-effect tyto-edit__color-select__menu mdl-menu--bottom-right">',_.forEach(colors,function(t){__p+="\n";var e=t===color?"is--selected":"";__p+='<li data-color="'+(null==(__t=t)?"":__t)+'" title="'+(null==(__t=t)?"":__t)+'" class="mdl-menu__item tyto-edit__color-select__menu-option bg--'+(null==(__t=t)?"":__t)+" hv--"+(null==(__t=t)?"":__t)+" "+(null==(__t=e)?"":__t)+'"></li>'}),__p+='</ul><button title="Start tracking" class="tyto-edit__track mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect"><i class="material-icons">schedule</i></button></div></div>';return __p},filterList:function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='<ul class="tyto-suggestions__list">',models.length>0?(__p+="\n",_.each(models,function(t){__p+="\n",__p+=t.attributes.boardId?'<li data-type="Tasks" data-model-id="'+(null==(__t=t.attributes.id)?"":__t)+'" class="tyto-suggestions__item">'+(null==(__t=t.attributes.title)?"":__t)+"</li>":'<li data-type="Boards" data-model-id="'+(null==(__t=t.attributes.id)?"":__t)+'" class="tyto-suggestions__item">'+(null==(__t=t.attributes.title)?"":__t)+"</li>",__p+="\n"}),__p+="\n"):__p+='<li class="tyto-suggestions__item">No suggestions available...</li>',__p+="</ul>";return __p},menu:function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="mdl-layout-title"><div class="tyto-menu__title"><h1>tyto</h1></div></div><ul class="tyto-menu__actions"><li><button class="tyto-menu__add-board mdl-button mdl-js-button mdl-js-ripple-effect">Add new board</button></li><li><button class="tyto-menu__import mdl-button mdl-js-button mdl-js-ripple-effect">Import data</button></li><li><button class="tyto-menu__load mdl-button mdl-js-button mdl-js-ripple-effect">Load data</button></li><li><button class="tyto-menu__export mdl-button mdl-js-button mdl-js-ripple-effect">Export data</button></li><li><button class="tyto-menu__delete-save mdl-button mdl-js-button mdl-js-ripple-effect">Delete data</button></li><a class="tyto-menu__exporter"></a><input type="file" class="tyto-menu__importer"/><li><div class="github-stats"><div class="github-stats__stars"><iframe src="http://ghbtns.com/github-btn.html?user=jh3y&amp;repo=tyto&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="90px" height="20"></iframe></div><div class="github-stats__forks"><iframe src="http://ghbtns.com/github-btn.html?user=jh3y&amp;repo=tyto&amp;type=fork&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="90px" height="20"></iframe></div><div class="github-stats__user"><iframe src="http://ghbtns.com/github-btn.html?user=jh3y&amp;repo=tyto&amp;type=follow&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="120px" height="20"></iframe></div></div></li></ul>';return __p},select:function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)0==items.length?__p+='<p><span>To start,</span><button class="tyto-select__add-board mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">Add a board</button></p><p><span>or</span><button class="tyto-select__load-intro-board mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">Load the intro board</button></p>':(__p+='<p><span>To start, select one of your boards.</span><div class="selector"><select class="tyto-select__board-selector"><option>--select a board--</option>',_.each(items,function(t){__p+='<option value="'+(null==(__t=t.id)?"":__t)+'">'+(null==(__t=t.title)?"":__t)+"</option>"}),__p+='</select></div></p><p><span>Alternatively,</span><button class="tyto-select__add-board mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">Add a board</button></p>');return __p},task:function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj){__p+='<div class="tyto-task__content"><div class="tyto-task__header tx--center"><i title="Move task" class="material-icons tyto-task__mover does--fade">open_with</i><h2 contenteditable="true" title="Task title" class="tyto-task__title">'+(null==(__t=title)?"":__t)+'</h2><button id="'+(null==(__t=id)?"":__t)+'--menu" title="Task options" class="mdl-button mdl-js-button mdl-button--icon tyto-task__menu-btn does--fade"><i class="material-icons">more_vert</i></button><ul for="'+(null==(__t=id)?"":__t)+'--menu" class="mdl-menu mdl-js-menu mdl-js-ripple-effect tyto-task__menu mdl-menu--bottom-right"><li title="Delete task" class="mdl-menu__item tyto-task__delete-task">Delete</li><li title="Edit task" class="mdl-menu__item tyto-task__edit-task">Edit</li><li title="Track task time" class="mdl-menu__item tyto-task__track-task">Track</li></ul></div><div title="Task description" class="mdl-card__supporting-text tyto-task__description">'+(null==(__t=description)?"":__t)+'</div><div class="tyto-task__edit-wrapper"><textarea class="tyto-task__description-edit is--hidden"></textarea><div class="tyto-task__suggestions tyto-suggestions__container mdl-shadow--2dp is--hidden"></div></div>';timeSpent.hours>0||timeSpent.minutes>0?"":"is--hidden";__p+='<div title="Time spent" class="tyto-time tyto-task__time"><i class="tyto-time__icon material-icons">schedule</i><span class="tyto-task__time__hours tyto-time__hours">'+(null==(__t=timeSpent.hours)?"":__t)+'h</span><span class="tyto-task__time__minutes tyto-time__minutes">'+(null==(__t=timeSpent.minutes)?"":__t)+"m</span></div></div>"}return __p},timeModal:function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="tyto-time-modal__content mdl-card mdl-shadow--4dp"><div class="tyto-time-modal__content-title mdl-card__title"><h2 class="mdl-card__title-text">'+(null==(__t=title)?"":__t)+'</h2></div><div class="tyto-time-modal__content-text tx--center mdl-card__supporting-text"><p class="tyto-time-modal__content-description"></p><h1 class="tyto-time-modal__timer-lbl"><span class="tyto-time-modal__timer-lbl-hours"></span><span>:</span><span class="tyto-time-modal__timer-lbl-minutes"></span><span>:</span><span class="tyto-time-modal__timer-lbl-seconds"></span></h1></div><div class="tyto-time-modal__actions mdl-card__actions mdl-card--border tx--center"><button title="Reset time" class="tyto-time-modal__timer-reset mdl-button mdl-js-button mdl-button--icon mdl-button--accent mdl-js-ripple-effect"><i class="material-icons">restore</i></button><button title="Stop/Start tracking" class="tyto-time-modal__timer mdl-button mdl-js-button mdl-button--icon mdl-button--accent mdl-js-ripple-effect"><i class="tyto-time-modal__timer-icon material-icons">play_arrow</i></button><button title="Exit tracking" class="tyto-time-modal__close mdl-button mdl-js-button mdl-button--icon mdl-button--accent mdl-js-ripple-effect"><i class="material-icons">clear</i></button></div></div>';return __p}}},{}],6:[function(t,e,o){var i;i=function(t,e,o,i){return t.proto=["filterItems","selectSuggestion","renderSuggestions","hideSuggestions"],t.props={ACTIVE_CLASS:"is--active",SUGGESTIONS_ITEM:".tyto-suggestions__item"},t.bootstrapView=function(e){var o,i,n,s;n=t.proto,s=[];for(i in n)o=n[i],s.push(e[o]=t[o]);return s},t.renderSuggestions=function(t){var e,o,i,n,s,r,l,a,d,u,c,_,m,p,b;return l=function(e){return-1!==e.attributes.title.toLowerCase().indexOf(t.toLowerCase())},b=this,s=b.ui.editDescription,u=b.domAttributes,m=b.ui.suggestions,i=Tyto.Boards.models.concat(Tyto.Tasks.models),i=t?i.filter(l):i,d=Tyto.TemplateStore.filterList({models:i.slice(0,4)}),e=$("body"),o=$(".tyto-column__tasks"),r=s[0].selectionEnd,_=b.__EDIT_START+1,p=s[0].value,a=function(t){var o;return o=t.target,"LI"!==o.nodeName&&"TEXTAREA"!==o.nodeName?(b.hideSuggestions(),b.delegateEvents(),s.blur(),e.off("click",a)):"TEXTAREA"===o.nodeName&&(_>r||-1!==p.substring(_,r).indexOf(" "))?b.hideSuggestions():void 0},c=function(t){return b.delegateEvents(),s.focus(),e.off("click",a),o.off("scroll",c),s.off("scroll",c),b.hideSuggestions()},b.$el.off("blur","."+s[0].className),e.on("click",a),o.on("scroll",c),s.on("scroll",c),b.__EDIT_MODE?m.html(d):(b.__EDIT_MODE=!0,b.__EDIT_START=s[0].selectionStart,n=Tyto.Utils.getCaretPosition(s[0]),m.html(d).css({left:n.LEFT,top:n.TOP}).removeClass(u.HIDDEN_UTIL_CLASS))},t.hideSuggestions=function(){var t,e,o;return o=this,t=o.domAttributes,o.__EDIT_MODE=!1,o.__ACTIVE_SUGGESTION=null,o.__EDIT_MODE_IN_SELECTION=!1,e=o.ui.suggestions,e.addClass(t.HIDDEN_UTIL_CLASS)},t.filterItems=function(e){var o,i,n,s,r,l,a,d,u,c,_,m;if(m=this,c=m.ui.suggestions,a=m.domAttributes,s=m.ui.editDescription,l=e.which,u=s[0].selectionStart,r=s[0].selectionEnd,_=s[0].value,35!==l||m.__EDIT_MODE){if(m.__EDIT_MODE)switch(l){case 35:case 32:return m.hideSuggestions();case 13:return m.__EDIT_MODE_IN_SELECTION&&null!==m.__ACTIVE_SUGGESTION?(e.preventDefault(),m.__ACTIVE_SUGGESTION.click()):m.hideSuggestions();case 8:return r===m.__EDIT_START?m.hideSuggestions():m.renderSuggestions(_.substring(m.__EDIT_START+1,r));case 38:case 40:if("keydown"===e.type)return e.preventDefault(),n=38===l?"prev":"next",d=38===l?"last":"first",m.__EDIT_MODE_IN_SELECTION?0===m.__ACTIVE_SUGGESTION[n]().length?(m.__ACTIVE_SUGGESTION.removeClass(t.props.ACTIVE_CLASS),m.__ACTIVE_SUGGESTION=c.find(t.props.SUGGESTIONS_ITEM)[d]().addClass(t.props.ACTIVE_CLASS)):m.__ACTIVE_SUGGESTION=m.__ACTIVE_SUGGESTION.removeClass(t.props.ACTIVE_CLASS)[n]().addClass(t.props.ACTIVE_CLASS):(m.__EDIT_MODE_IN_SELECTION=!0,m.__ACTIVE_SUGGESTION=c.find(t.props.SUGGESTIONS_ITEM)[d]().addClass(t.props.ACTIVE_CLASS));break;case 37:case 39:if("keyup"===e.type&&(r<m.__EDIT_START+1||_.substring(m.__EDIT_START,r).length!==_.substring(m.__EDIT_START,r).trim().length))return m.hideSuggestions();break;default:if("keyup"===e.type)return m.renderSuggestions(_.substring(m.__EDIT_START+1,r))}}else if(i=_.charAt(u-1).trim(),o=_.charAt(u).trim(),""===i&&""===o)return m.renderSuggestions()},t.selectSuggestion=function(t){var e,o,i,n,s,r,l,a,d;return d=this,o=d.ui.editDescription,r=t.target.getAttribute("data-type"),s=t.target.getAttribute("data-model-id"),r&&(n=Tyto[r].get(s),n.attributes.boardId?(e=Tyto.Tasks.get(s).attributes.boardId,a="#board/"+e+"/task/"+s):a="#board/"+s,a="["+n.attributes.title+"]("+a+")",l=o[0].value.slice(0,d.__EDIT_START),i=o[0].value.slice(o[0].selectionEnd,o[0].value.length),o[0].value=l+" "+a+" "+i),$("body").off("click"),d.ui.editDescription.focus(),d.hideSuggestions(),d.delegateEvents()}},e.exports=i},{}],7:[function(t,e,o){var i;i=function(t,e,o,i){return t.upgradeMDL=function(t){return _.forEach(t,function(t,e){return t.el?componentHandler.upgradeElement(t.el,t.component):void 0})},t.reorder=function(t,e,o){var i;return i=t.collection,_.forEach(e,function(t,e){var n,s;return n=t.getAttribute(o),s=i.get(n),s?s.save({ordinal:e+1}):void 0})},t.autoSize=function(t){var e;return e=function(){return t.style.height="auto",t.style.height=t.scrollHeight+"px"},t.addEventListener("keydown",e),t.addEventListener("input",e),t.addEventListener("focus",e),e()},t.getCaretPosition=function(t){var e,o,i,n,s,r,l,a,d;return o=t.selectionEnd,s=document.createElement("div"),a=document.createElement("span"),n=getComputedStyle(t),i={},e=t.getBoundingClientRect(),[].forEach.call(n,function(t){return s.style[t]=n[t]}),s.style.position="absolute",s.textContent=t.value.substr(0,o),a.textContent=t.value.substr(o)||".",s.appendChild(a),document.body.appendChild(s),r=parseFloat(n.fontSize.replace("px",""),10),d=t.offsetTop-t.scrollTop+a.offsetTop+r,d=d>t.offsetHeight?t.offsetHeight:d,l=t.offsetLeft-t.scrollLeft+a.offsetLeft,i={TOP:d+e.top+"px",LEFT:l+e.left+"px"},document.body.removeChild(s),i},t.processQueryString=function(t){var e,o;return o={},e=function(t){return t=t.split("="),o[t[0]]=t[1]},_.map(t.split("&"),e),o},t.bloom=function(t,e,o){var i,n,s,r;return i=Tyto.BoardView.ui.bloomer,n=i[0],s=t.getBoundingClientRect(),n.style.left=s.left+s.width/2+"px",n.style.top=s.top+s.height/2+"px",n.className="tyto-board__bloomer bg--"+e,n.classList.add("is--blooming"),Tyto.RootView.el.classList.add("is--showing-bloom"),r=function(){return i.off(Tyto.ANIMATION_EVENT,r),Tyto.navigate(o,!0)},i.on(Tyto.ANIMATION_EVENT,r)},t.load=function(t,e,o){var i,n,s,r;return n=[],s=[],r=[],i={},e&&(delete t.tyto,delete t["tyto--board"],delete t["tyto--column"],delete t["tyto--task"]),o&&_.forOwn(window.localStorageJ,function(t,e){return-1!==e.indexOf("tyto")?window.localStorage.removeItem(e):void 0}),_.forOwn(t,function(t,l){var a,d;return o&&window.localStorage.setItem(l,t),-1!==l.indexOf("tyto--board-")&&(e?(a=JSON.parse(t),void 0!==Tyto.Boards.get(a.id)&&(d=a.id,delete a.id),i[d]=Tyto.Boards.create(a).id):n.push(JSON.parse(t))),-1!==l.indexOf("tyto--column-")&&(e?(a=JSON.parse(t),i[a.boardId]&&(a.boardId=i[a.boardId]),void 0!==Tyto.Columns.get(a.id)&&(d=a.id,delete a.id),i[d]=Tyto.Columns.create(a).id):s.push(JSON.parse(t))),-1!==l.indexOf("tyto--task-")?e?(a=JSON.parse(t),i[a.boardId]&&(a.boardId=i[a.boardId]),i[a.columnId]&&(a.columnId=i[a.columnId]),void 0!==Tyto.Tasks.get(a.id)&&(d=a.id,delete a.id),i[d]=Tyto.Tasks.create(a).id):r.push(JSON.parse(t)):void 0}),e?void 0:(Tyto.Boards.reset(n),Tyto.Columns.reset(s),Tyto.Tasks.reset(r))},t.EMAIL_TEMPLATE="<div>Status for: <%= board.title %>\n\n<% if (columns.length > 0 && tasks.length > 0) { %><% _.forEach(columns, function(column) { %><%= column.attributes.title %>\n&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;\n\n<% _.forEach(tasks, function(task) { %><% if (task.attributes.columnId === column.attributes.id) { %>&#8226; <%= task.attributes.title %>; <%= task.attributes.description %><% if (task.attributes.timeSpent.hours > 0 || task.attributes.timeSpent.minutes > 0) { %> -- <%=task.attributes.timeSpent.hours %> hours, <%= task.attributes.timeSpent.minutes %> minutes.<% } %>\n<% } %><% });%>\n<% }); %><% } else { %>Seems we are way ahead, so treat yourself and go grab a coffee! :)<% } %></div>",t.getEmailContent=function(t){var e,o,i,n,s;return o="mailto:",i="someone@somewhere.com",n="Status for "+Tyto.ActiveBoard.get("title")+" as of "+(new Date).toString(),s=_.template(Tyto.Utils.EMAIL_TEMPLATE),e=s({board:t.attributes,columns:Tyto.Columns.where({boardId:t.id}),tasks:Tyto.Tasks.where({boardId:t.id})}),e=$(e).text(),e=encodeURIComponent(e),o+i+"?subject="+encodeURIComponent(n.trim())+"&body="+e},t.showTimeModal=function(t,o){return Tyto.RootView.$el.prepend($('<div class="tyto-time-modal__wrapper"></div>')),Tyto.RootView.addRegion("TimeModal",".tyto-time-modal__wrapper"),Tyto.TimeModalView=new e.Views.TimeModal({model:t,modelView:o}),Tyto.RootView.showChildView("TimeModal",Tyto.TimeModalView)},t.getRenderFriendlyTime=function(t){var e,o,i,n,s;for(s={},n=["hours","minutes","seconds"],e=0,o=n.length;o>e;e++)i=n[e],s[i]=t[i]<10?"0"+t[i]:t[i];return s},t.renderTime=function(t){var e,o;return o=t.model.get("timeSpent"),o.hours>0||o.minutes>0?(t.ui.time.hasClass(t.domAttributes.HIDDEN_UTIL_CLASS)&&t.ui.time.removeClass(t.domAttributes.HIDDEN_UTIL_CLASS),e=Tyto.Utils.getRenderFriendlyTime(o),t.ui.hours.text(e.hours+"h"),t.ui.minutes.text(e.minutes+"m")):t.ui.time.hasClass(t.domAttributes.HIDDEN_UTIL_CLASS)?void 0:t.ui.time.addClass(t.domAttributes.HIDDEN_UTIL_CLASS)}},e.exports=i},{}],8:[function(t,e,o){var i;i=t("./column"),e.exports=Backbone.Marionette.CompositeView.extend({tagName:"div",className:function(){return this.domAttributes.VIEW_CLASS},template:Tyto.TemplateStore.board,templateHelpers:function(){return{boards:Tyto.Boards}},childView:i,childViewContainer:function(){return this.domAttributes.CHILD_VIEW_CONTAINER_CLASS},childViewOptions:function(t){var e,o;return o=this,e=Tyto.ActiveTasks.where({columnId:t.id}),{collection:new Tyto.Models.TaskCollection(e),board:o.model}},ui:{addEntity:".tyto-board__add-entity",primaryActions:".tyto-board__actions",boardMenu:".tyto-board__menu",boardSelect:".tyto-board__selector__menu",addColumn:".tyto-board__add-column",addTask:".tyto-board__super-add",deleteBoard:".tyto-board__delete-board",wipeBoard:".tyto-board__wipe-board",emailBoard:".tyto-board__email-board",emailer:".tyto-board__emailer",boardName:".tyto-board__title",columnContainer:".tyto-board__columns",bloomer:".tyto-board__bloomer"},collectionEvents:{destroy:"handleColumnRemoval"},domAttributes:{VIEW_CLASS:"tyto-board",CHILD_VIEW_CONTAINER_CLASS:".tyto-board__columns",COLUMN_CLASS:".tyto-column",COLUMN_ATTR:"data-col-id",COLUMN_MOVER_CLASS:".tyto-column__mover",COLUMN_PLACEHOLDER_CLASS:"tyto-column__placeholder",FAB_MENU_VISIBLE_CLASS:"is-showing-options",ADDING_COLUMN_CLASS:"is--adding-column"},getMDLMap:function(){var t;return t=this,[{el:t.ui.boardMenu[0],component:"MaterialMenu"},{el:t.ui.boardSelect[0],component:"MaterialMenu"}]},handleColumnRemoval:function(){var t,e;return e=this,t=e.$el.find(e.domAttributes.COLUMN_CLASS),Tyto.Utils.reorder(e,t,e.domAttributes.COLUMN_ATTR)},events:{"click @ui.addEntity":"showPrimaryActions","click @ui.addColumn":"addNewColumn","click @ui.addTask":"addNewTask","click @ui.deleteBoard":"deleteBoard","click @ui.wipeBoard":"wipeBoard","click @ui.emailBoard":"emailBoard","blur @ui.boardName":"saveBoardName"},showPrimaryActions:function(t){var e,o,i,n,s;return s=this,o=s.ui.primaryActions[0],e=s.ui.addEntity[0],i=s.domAttributes.FAB_MENU_VISIBLE_CLASS,n=function(e){return t.timeStamp!==e.timeStamp?(o.classList.remove(i),o.IS_SHOWING_MENU=!1,document.removeEventListener("click",n)):void 0},o.IS_SHOWING_MENU?void 0:(o.IS_SHOWING_MENU=!0,o.classList.add(i),document.addEventListener("click",n))},onBeforeRender:function(){return this.collection.models=this.collection.sortBy("ordinal")},onShow:function(){var t;return t=this,Tyto.Utils.upgradeMDL(t.getMDLMap())},onRender:function(){return this.bindColumns()},bindColumns:function(){var t,e;return e=this,t=e.domAttributes,e.ui.columnContainer.sortable({connectWith:t.COLUMN_CLASS,handle:t.COLUMN_MOVER_CLASS,placeholder:t.COLUMN_PLACEHOLDER_CLASS,axis:"x",containment:e.$childViewContainer,stop:function(o,i){var n;return n=Array.prototype.slice.call(e.$el.find(t.COLUMN_CLASS)),Tyto.Utils.reorder(e,n,t.COLUMN_ATTR)}})},addNewColumn:function(){var t,e,o;return o=this,t=o.model,e=o.collection,e.add(Tyto.Columns.create({boardId:t.id,ordinal:e.length+1})),o.$el.addClass(o.domAttributes.ADDING_COLUMN_CLASS)},saveBoardName:function(){return this.model.save({title:this.ui.boardName.text().trim()})},addNewTask:function(){var t,e,o,i;return i=this,e=i.model,o=_.uniqueId(),t="#board/"+e.id+"/task/"+o+"?isFresh=true",Tyto.Utils.bloom(i.ui.addTask[0],Tyto.DEFAULT_TASK_COLOR,t)},deleteBoard:function(){var t;return t=this,0===t.collection.length||confirm(Tyto.CONFIRM_MESSAGE)?(t.wipeBoard(),t.model.destroy(),t.destroy(),Tyto.navigate("/",{trigger:!0})):void 0},wipeBoard:function(t){var e,o;return e=this,o=function(){return e.children.forEach(function(t){for(;0!==t.collection.length;)t.collection.first().destroy();return t.model.destroy()})},t?confirm("[tyto] are you sure you wish to wipe the board?")?o():void 0:o()},emailBoard:function(){var t,e;return e=this,t=Tyto.Utils.getEmailContent(e.model),this.ui.emailer.attr("href",t),this.ui.emailer[0].click()}})},{"./column":9}],9:[function(t,e,o){var i;i=t("./task"),e.exports=Backbone.Marionette.CompositeView.extend({tagName:"div",className:function(){return this.domAttributes.VIEW_CLASS},attributes:function(){var t;return t={},t[this.domAttributes.VIEW_ATTR]=this.model.get("id"),t},template:Tyto.TemplateStore.column,childView:i,childViewContainer:function(){return this.domAttributes.CHILD_VIEW_CONTAINER_CLASS},events:{"click @ui.deleteColumn":"deleteColumn","click @ui.addTask":"addTask","blur @ui.columnTitle":"updateTitle"},ui:{deleteColumn:".tyto-column__delete-column",addTask:".tyto-column__add-task",columnTitle:".tyto-column__title",taskContainer:".tyto-column__tasks",columnMenu:".tyto-column__menu"},collectionEvents:{destroy:"handleTaskRemoval"},domAttributes:{VIEW_CLASS:"tyto-column",VIEW_ATTR:"data-col-id",PARENT_CONTAINER_CLASS:".tyto-board__columns",CHILD_VIEW_CONTAINER_CLASS:".tyto-column__tasks",BOARD_CLASS:".tyto-board",COLUMN_ADD_CLASS:"is--adding-column",TASK_ADD_CLASS:"is--adding-task",TASK_ATTR:"data-task-id",TASK_CLASS:".tyto-task",TASK_MOVER_CLASS:".tyto-task__mover",TASK_PLACEHOLDER_CLASS:"tyto-task__placeholder"},getMDLMap:function(){var t;return t=this,[{el:t.ui.columnMenu[0],component:"MaterialMenu"}]},handleTaskRemoval:function(t){var e,o,i;return i=this,e=i.domAttributes,o=Array.prototype.slice.call(i.$el.find(e.TASK_CLASS)),Tyto.Utils.reorder(i,o,e.TASK_ATTR)},initialize:function(){var t,e;return e=this,t=e.domAttributes,e.$el.on(Tyto.ANIMATION_EVENT,function(){return e.$el.parents(t.BOARD_CLASS).removeClass(t.COLUMN_ADD_CLASS)})},onBeforeRender:function(){
return this.collection.models=this.collection.sortBy("ordinal")},bindTasks:function(){var t,e;return e=this,t=e.domAttributes,e.ui.taskContainer.sortable({connectWith:t.CHILD_VIEW_CONTAINER_CLASS,handle:t.TASK_MOVER_CLASS,placeholder:t.TASK_PLACEHOLDER_CLASS,containment:e.domAttributes.PARENT_CONTAINER_CLASS,stop:function(o,i){var n,s,r,l,a;return l=e.collection.get(i.item.attr(t.TASK_ATTR)),s=e,a=$(i.item).parents("["+t.VIEW_ATTR+"]").attr(t.VIEW_ATTR),a!==l.get("columnId")&&(n=Tyto.Columns.get(a),s=Tyto.BoardView.children.findByModel(n),r=s.$el.find(t.TASK_CLASS),l.save({columnId:a}),e.collection.remove(l),s.collection.add(l),Tyto.Utils.reorder(s,r,t.TASK_ATTR),s.render(),s.upgradeComponents()),r=e.$el.find(t.TASK_CLASS),Tyto.Utils.reorder(e,r,t.TASK_ATTR),e.render(),e.upgradeComponents()}})},onShow:function(){var t,e,o,i;return i=this,t=i.domAttributes,o=$(t.PARENT_CONTAINER_CLASS)[0],e=i.$el.parents(t.BOARD_CLASS),o.scrollWidth>window.outerWidth&&(o.scrollLeft=o.scrollWidth),i.upgradeComponents()},onRender:function(){return this.bindTasks()},upgradeComponents:function(){var t;return t=this,Tyto.Utils.upgradeMDL(t.getMDLMap())},updateTitle:function(){return this.model.save({title:this.ui.columnTitle.text()})},addTask:function(){var t,e;return e=this,t=e.domAttributes,this.collection.add(Tyto.Tasks.create({columnId:e.model.id,boardId:e.options.board.id,ordinal:e.collection.length+1})),e.$el.addClass(t.TASK_ADD_CLASS)},deleteColumn:function(){if(0===this.collection.length||confirm(Tyto.CONFIRM_MESSAGE)){for(;0!==this.collection.length;)this.collection.first().destroy();return this.model.destroy()}}})},{"./task":15}],10:[function(t,e,o){e.exports=Backbone.Marionette.ItemView.extend({template:Tyto.TemplateStore.cookieBanner,ui:{closeBtn:".tyto-cookies__accept"},events:{"click @ui.closeBtn":"closeBanner"},closeBanner:function(){return window.localStorage.setItem("tyto",!0),Tyto.RootView.removeRegion("Cookie"),this.destroy()}})},{}],11:[function(t,e,o){var i;i=Backbone.Marionette.ItemView.extend({template:Tyto.TemplateStore.edit,className:function(){return this.domAttributes.VIEW_CLASS},templateHelpers:function(){var t;return t=this,{selectedColumn:_.findWhere(t.options.columns,{id:t.model.get("columnId")}),board:this.options.board,columns:_.sortBy(this.options.columns,"attributes.title"),isNew:this.options.isNew,colors:Tyto.TASK_COLORS}},domAttributes:{VIEW_CLASS:"tyto-edit",BLOOM_SHOW_CLASS:"is--showing-bloom",EDIT_SHOW_CLASS:"is--showing-edit-view",MODEL_PROP_ATTR:"data-model-prop",HIDDEN_UTIL_CLASS:"is--hidden"},props:{DEFAULT_COLOR_VALUE:"default"},ui:{save:".tyto-edit__save",color:".tyto-edit__color-select__menu-option",taskDescription:".tyto-edit__task-description",editDescription:".tyto-edit__edit-description",suggestions:".tyto-task__suggestions",taskTitle:".tyto-edit__task-title",column:".tyto-edit__column-select__menu-option",colorMenu:".tyto-edit__color-select__menu",columnMenu:".tyto-edit__column-select__menu",columnLabel:".tyto-edit__task-column",track:".tyto-edit__track",time:".tyto-edit__task-time",hours:".tyto-edit__task-time__hours",minutes:".tyto-edit__task-time__minutes"},events:{"click @ui.save":"saveTask","click @ui.color":"changeColor","click @ui.column":"changeColumn","click @ui.track":"trackTime","click @ui.taskDescription":"showEditMode","blur @ui.editDescription":"updateTask","blur @ui.taskTitle":"updateTask","keypress @ui.editDescription":"filterItems","keydown @ui.editDescription":"filterItems","keyup @ui.editDescription":"filterItems","click @ui.suggestions":"selectSuggestion"},initialize:function(){var t;return t=this,Tyto.Suggestions.bootstrapView(t),Tyto.RootView.el.classList.add("bg--"+t.model.get("color")),Tyto.RootView.el.classList.remove(t.domAttributes.BLOOM_SHOW_CLASS)},getMDLMap:function(){var t;return t=this,[{el:t.ui.columnMenu[0],component:"MaterialMenu"},{el:t.ui.colorMenu[0],component:"MaterialMenu"}]},updateTask:function(t){var e,o,i,n,s,r;return r=this,e=r.domAttributes,n=t.target,s="TEXTAREA"===n.nodeName?n.value:n.innerHTML,r.model.set(n.getAttribute(e.MODEL_PROP_ATTR),s),"TEXTAREA"===n.nodeName?(o=r.ui.taskDescription,i=r.ui.editDescription,o.html(marked(i.val())),i.addClass(e.HIDDEN_UTIL_CLASS),o.removeClass(e.HIDDEN_UTIL_CLASS)):void 0},onShow:function(){return Tyto.Utils.upgradeMDL(this.getMDLMap())},onRender:function(){var t;return t=this,t.ui.taskDescription.html(marked(t.model.get("description"))),Tyto.Utils.autoSize(t.ui.editDescription[0]),Tyto.Utils.renderTime(t)},trackTime:function(){return Tyto.Utils.showTimeModal(this.model,this)},showEditMode:function(){var t,e,o,i;return e=this.domAttributes,i=this.model,t=this.ui.taskDescription,o=this.ui.editDescription,t.addClass(e.HIDDEN_UTIL_CLASS),o.removeClass(e.HIDDEN_UTIL_CLASS).val(i.get("description")).focus()},saveTask:function(){var t,e,o;return o=this,e=function(){return delete o.model.attributes.id,Tyto.Tasks.create(o.model.attributes),Tyto.navigate("/board/"+o.options.board.id,!0)},0===o.options.columns.length||o.selectedColumnId?0!==o.options.columns.length&&o.selectedColumnId?e():0===o.options.columns.length?(t=Tyto.Columns.create({boardId:o.options.board.id,ordinal:1}),o.model.set("columnId",t.id),o.model.set("ordinal",1),e()):void 0:alert("whoah, you need to select a column for that new task")},changeColumn:function(t){var e,o,i;return i=this,e=t.target.getAttribute("data-column-id"),e!==i.model.get("columnId")?(i.ui.column.removeClass(Tyto.SELECTED_CLASS),t.target.classList.add(Tyto.SELECTED_CLASS),o=Tyto.Tasks.where({columnId:e}).length+1,i.ui.columnLabel.text(t.target.textContent),i.selectedColumnId=e,i.model.set("columnId",e),i.model.set("ordinal",o)):void 0},changeColor:function(t){var e,o;return o=this,e=t.target.getAttribute("data-color"),Tyto.RootView.el.classList.add(o.domAttributes.EDIT_SHOW_CLASS),e!==o.props.DEFAULT_COLOR_VALUE?(o.ui.color.removeClass(Tyto.SELECTED_CLASS),t.target.classList.add(Tyto.SELECTED_CLASS),Tyto.RootView.el.classList.remove("bg--"+o.model.get("color")),Tyto.RootView.el.classList.add("bg--"+e),o.model.set("color",e)):void 0},onBeforeDestroy:function(){var t;return t=this,Tyto.RootView.$el.removeClass("bg--"+t.model.get("color")),Tyto.RootView.$el.removeClass(t.domAttributes.EDIT_SHOW_CLASS),t.options.isNew?void 0:t.model.save()}}),e.exports=i},{}],12:[function(t,e,o){e.exports=Backbone.Marionette.ItemView.extend({template:Tyto.TemplateStore.menu,tagName:"div",className:function(){return this.domAttributes.VIEW_CLASS},ui:{addBoardBtn:".tyto-menu__add-board",exportBtn:".tyto-menu__export",loadBtn:".tyto-menu__load",importBtn:".tyto-menu__import",deleteBtn:".tyto-menu__delete-save",exporter:".tyto-menu__exporter",importer:".tyto-menu__importer",action:"button"},events:{"click  @ui.addBoardBtn":"addBoard","click  @ui.exportBtn":"exportData","click  @ui.deleteBtn":"deleteAppData","click  @ui.loadBtn":"initLoad","click  @ui.importBtn":"initLoad","click  @ui.action":"restoreContent","change @ui.importer":"handleFile"},props:{DOWNLOAD_FILE_NAME:"barn.json"},domAttributes:{VIEW_CLASS:"tyto-menu",MENU_VISIBLE_CLASS:"is-visible"},onShow:function(){var t;return t=this,t.reader=new FileReader,t.reader.onloadend=function(e){var o;return o=JSON.parse(e.target.result),t.activeImporter.id===t.ui.loadBtn.attr("id")?Tyto.Utils.load(o,!1,!0):Tyto.Utils.load(o,!0,!1),Tyto.navigate("/",!0)}},restoreContent:function(){var t;return t=this.domAttributes,Tyto.RootView.getRegion("Menu").$el.removeClass(t.MENU_VISIBLE_CLASS)},handleFile:function(t){var e,o;o=this,e=t.target.files[0],e.type.match("application/json")||e.name.indexOf(!0)?o.reader.readAsText(e):alert("[tyto] only valid json files allowed")},initLoad:function(t){var e;return this.activeImporter=t.currentTarget,e=this.ui.importer[0],window.File&&window.FileReader&&window.FileList&&window.Blob?e.click():alert("[tyto] Unfortunately the file APIs are not fully supported in your browser")},exportData:function(){var t,e,o,i,n;n=this,t=n.ui.exporter[0],o={},_.forOwn(window.localStorage,function(t,e){return-1!==e.indexOf("tyto")?o[e]=t:void 0}),i=n.props.DOWNLOAD_FILE_NAME,e="data:text/plain,"+JSON.stringify(o),t.setAttribute("download",i),t.setAttribute("href",e),t.click()},deleteAppData:function(){return _.forOwn(window.localStorage,function(t,e){return-1!==e.indexOf("tyto")&&"tyto"!==e?window.localStorage.removeItem(e):void 0}),Tyto.Boards.reset(),Tyto.Columns.reset(),Tyto.Tasks.reset(),Tyto.navigate("/",!0)},addBoard:function(){return Tyto.navigate("board/"+Tyto.Boards.create().id,!0)}})},{}],13:[function(t,e,o){var i;i=Backbone.Marionette.LayoutView.extend({el:"#tyto-app",regions:{Menu:"#tyto-menu",Content:"#tyto-content"}}),e.exports=i},{}],14:[function(t,e,o){e.exports=Backbone.Marionette.ItemView.extend({template:Tyto.TemplateStore.select,tagName:"div",className:function(){return this.domAttributes.VIEW_CLASS},ui:{add:".tyto-select__add-board",load:".tyto-select__load-intro-board",boardSelector:".tyto-select__board-selector"},events:{"click @ui.add":"addBoard","change @ui.boardSelector":"showBoard","click @ui.load":"loadIntro"},domAttributes:{VIEW_CLASS:"tyto-select"},collectionEvents:{all:"render"},initialize:function(){var t;return t=this},addBoard:function(){return this.showBoard(Tyto.Boards.create().id)},loadIntro:function(){var t,e;return e=this,t=void 0,Tyto.RootView.$el.addClass(Tyto.LOADING_CLASS),$.getJSON(Tyto.INTRO_JSON_SRC,function(o){return Tyto.RootView.$el.removeClass(Tyto.LOADING_CLASS),Tyto.Utils.load(o,!0,!1),_.forOwn(o,function(e,o){return-1!==o.indexOf("tyto--board-")?t=JSON.parse(e).id:void 0}),e.showBoard(t)})},showBoard:function(t){"string"!=typeof t&&(t=this.ui.boardSelector.val()),Tyto.navigate("board/"+t,{trigger:!0})}})},{}],15:[function(t,e,o){e.exports=Backbone.Marionette.ItemView.extend({tagName:"div",className:function(){return this.domAttributes.VIEW_CLASS+this.model.attributes.color},attributes:function(){var t;return t={},t[this.domAttributes.VIEW_ATTR]=this.model.get("id"),t},template:Tyto.TemplateStore.task,ui:{deleteTask:".tyto-task__delete-task",editTask:".tyto-task__edit-task",trackTask:".tyto-task__track-task",description:".tyto-task__description",title:".tyto-task__title",menu:".tyto-task__menu",hours:".tyto-task__time__hours",minutes:".tyto-task__time__minutes",time:".tyto-task__time",editDescription:".tyto-task__description-edit",suggestions:".tyto-task__suggestions"},events:{"click @ui.deleteTask":"deleteTask","click @ui.editTask":"editTask","click @ui.trackTask":"trackTask","blur  @ui.title":"saveTaskTitle","blur  @ui.editDescription":"saveTaskDescription","click @ui.description":"showEditMode","keypress @ui.editDescription":"filterItems","keydown @ui.editDescription":"filterItems","keyup @ui.editDescription":"filterItems","click @ui.suggestions":"selectSuggestion"},domAttributes:{VIEW_CLASS:"tyto-task mdl-card mdl-shadow--2dp bg--",VIEW_ATTR:"data-task-id",IS_BEING_ADDED_CLASS:"is--adding-task",COLUMN_CLASS:".tyto-column",TASK_CONTAINER_CLASS:".tyto-column__tasks",HIDDEN_UTIL_CLASS:"is--hidden",INDICATOR:".indicator"},getMDLMap:function(){var t;return t=this,[{el:t.ui.menu[0],component:"MaterialMenu"}]},initialize:function(){var t,e;return e=this,t=e.domAttributes,Tyto.Suggestions.bootstrapView(e),e.$el.on(Tyto.ANIMATION_EVENT,function(){return $(this).parents(t.COLUMN_CLASS).removeClass(t.IS_BEING_ADDED_CLASS)})},deleteTask:function(){return confirm(Tyto.CONFIRM_MESSAGE)?this.model.destroy():void 0},onShow:function(){var t,e,o,i;return i=this,t=i.domAttributes,o=i.$el.parents(t.TASK_CONTAINER_CLASS)[0],e=i.$el.parents(t.COLUMN_CLASS),o.scrollHeight>o.offsetHeight&&(o.scrollTop=o.scrollHeight),Tyto.Utils.upgradeMDL(i.getMDLMap())},onRender:function(){var t;return t=this,t.ui.description.html(marked(t.model.get("description"))),Tyto.Utils.autoSize(t.ui.editDescription[0]),Tyto.Utils.renderTime(t)},trackTask:function(t){return Tyto.Utils.showTimeModal(this.model,this)},editTask:function(t){var e,o,i,n;return n=this,e=n.model.get("boardId"),i=n.model.id,o="#board/"+e+"/task/"+i,Tyto.Utils.bloom(n.ui.editTask[0],n.model.get("color"),o)},showEditMode:function(){var t,e,o,i;return e=this.domAttributes,i=this.model,t=this.ui.description,o=this.ui.editDescription,t.addClass(e.HIDDEN_UTIL_CLASS),o.removeClass(e.HIDDEN_UTIL_CLASS).val(i.get("description")).focus()},saveTaskDescription:function(t){var e,o,i,n;return console.info("SAVING"),i=this.domAttributes,n=this.ui.editDescription,o=this.ui.description,n.addClass(i.HIDDEN_UTIL_CLASS),o.removeClass(i.HIDDEN_UTIL_CLASS),e=n.val(),this.model.save({description:e}),o.html(marked(e))},saveTaskTitle:function(){return this.model.save({title:this.ui.title.text().trim()})}})},{}],16:[function(t,e,o){var i;i=Backbone.Marionette.ItemView.extend({template:Tyto.TemplateStore.timeModal,className:function(){return this.domAttributes.VIEW_CLASS},domAttributes:{VIEW_CLASS:"tyto-time-modal",PLAY_ICON:"play_arrow",PAUSE_ICON:"pause"},ui:{timerBtn:".tyto-time-modal__timer",taskDescription:".tyto-time-modal__content-description",timerIcon:".tyto-time-modal__timer-icon",resetBtn:".tyto-time-modal__timer-reset",closeBtn:".tyto-time-modal__close",timeLbl:".tyto-time-modal__timer-lbl",hours:".tyto-time-modal__timer-lbl-hours",minutes:".tyto-time-modal__timer-lbl-minutes",seconds:".tyto-time-modal__timer-lbl-seconds"},events:{"click @ui.closeBtn":"closeModal","click @ui.timerBtn":"toggleTimer","click @ui.resetBtn":"resetTimer"},startTimer:function(){var t;return t=this,t.isTiming=!0,t.ui.timerIcon.text(t.domAttributes.PAUSE_ICON),t.ui.resetBtn.attr("disabled",!0),t.ui.resetBtn.removeClass("mdl-button--accent"),t.ui.closeBtn.attr("disabled",!0),t.ui.closeBtn.removeClass("mdl-button--accent"),t.timingInterval=setInterval(function(){return t.incrementTime(),t.renderTime()},1e3)},incrementTime:function(){var t,e;return e=this,t=e.model.get("timeSpent"),t.seconds++,t.seconds>=60&&(t.seconds=0,t.minutes++,t.minutes>=60)?(t.minutes=0,t.hours++):void 0},renderTime:function(){var t,e,o,i,n,s,r;for(r=this,i=Tyto.Utils.getRenderFriendlyTime(r.model.get("timeSpent")),n=["hours","minutes","seconds"],s=[],t=0,e=n.length;e>t;t++)o=n[t],r.ui[o].text()!==i[o]?s.push(r.ui[o].text(i[o])):s.push(void 0);return s},onRender:function(){var t;return t=this,t.ui.taskDescription.html(marked(t.model.get("description"))),t.renderTime()},stopTimer:function(){var t;return t=this,t.isTiming=!1,t.ui.timerIcon.text(t.domAttributes.PLAY_ICON),t.ui.resetBtn.removeAttr("disabled"),t.ui.resetBtn.addClass("mdl-button--accent"),t.ui.closeBtn.removeAttr("disabled"),t.ui.closeBtn.addClass("mdl-button--accent"),clearInterval(t.timingInterval)},resetTimer:function(){var t;return t=this,t.model.set("timeSpent",{hours:0,minutes:0,seconds:0}),t.renderTime()},toggleTimer:function(){var t;return t=this,t.isTiming?t.stopTimer():t.startTimer()},closeModal:function(){var t;return t=this,t.model.save({timeSpent:t.model.get("timeSpent")}),Tyto.RootView.getRegion("TimeModal").$el.remove(),Tyto.RootView.removeRegion("TimeModal"),Tyto.Utils.renderTime(t.options.modelView),t.destroy()}}),e.exports=i},{}],17:[function(t,e,o){var i,n,s,r,l,a,d,u,c,_;u=t("./task"),i=t("./board"),n=t("./column"),r=t("./edit"),a=t("./root"),l=t("./menu"),d=t("./select"),s=t("./cookie"),c=t("./time"),_=function(t,e,o){return t.Root=a,t.Task=u,t.Column=n,t.Board=i,t.Edit=r,t.Menu=l,t.Select=d,t.CookieBanner=s,t.TimeModal=c},e.exports=_},{"./board":8,"./column":9,"./cookie":10,"./edit":11,"./menu":12,"./root":13,"./select":14,"./task":15,"./time":16}]},{},[1])}();